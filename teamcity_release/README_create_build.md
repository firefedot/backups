### Teamcity create build

Запуск:

    ansible-playbook playbook_teamcity_realease.yml -i ../testservers_inventory.yml
    # -i ../testservers_inventory.yml.yml - файл инвентори  для тестовых серверов
    
    
#### Что делает

Создает сборку тестового сервера и подготавливает все нужные директории, файлы и базу

Проверяет наличиние нового сервера в файлах jnlp  и servers.yaml.

Если выставлен режим авто, то выберет сам порты и пропишет их в файлы и закомитит. Если порты ставтяся в ручную, то предварительно проверит их (по портам в файлах)

Создаст в тестовом проекте билд, на него навесит шаблон, установит все зависимости и параметры

Подготовит на сервере диретории и файл сервиса, перезапустит systemd-daemon

Создаст базу пустую из svn

### p.s.

Для запуска сборки в тимсити нужен логин и пароль, нужно создать файл main.yml  и положить в roles/teamcity_release/vars/.

Файл не улетит в гит, этому способствует файл .gitignore в той же директории

Пример файла vars/main.yml

    tc_login_user: Логин_от_тимсити
    tc_login_password: Пароль_от_тимсити
    
#### p.s.2
файл testservers_inventory.yml отлючается от файлов инвентори для прода - иметь это ввиду
Версия для stable  и  develop  пока что прописываются в ручную. будет исправлено в следующих редакциях
    
##### Все гит проекты должны лежать в одной директории